{% extends 'app_LyfeSync/layouts/masterpage_logado.html' %}
{% load static %}

{% block title %}Registrar Humor{% endblock %}

{% block content_logado %}
  <script src="https://cdn.tailwindcss.com"></script>

<div class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
Â  Â  <div class="flex flex-wrap lg:flex-nowrap gap-8">
Â  Â  Â  Â  
Â  Â  Â  Â  <!-- COLUNA ESQUERDA: Registro de Humor (FormulÃ¡rio) -->
Â  Â  Â  Â  <div class="w-full lg:w-3/5 bg-white p-6 rounded-xl shadow-lg">
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <!-- TÃ­tulo -->
Â  Â  Â  Â  Â  Â  <h1 class="text-3xl font-bold text-lyfesync-green mb-8">
Â  Â  Â  Â  Â  Â  Â  Â  Como vocÃª estÃ¡ se sentindo hoje?
Â  Â  Â  Â  Â  Â  </h1>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <form id="form-registro-humor" method="POST" action="{% url 'registrarHumor' %}">
Â  Â  Â  Â  Â  Â  Â  Â  {% csrf_token %}

Â  Â  Â  Â  Â  Â  Â  Â  <!-- Data -->
Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="id_data" class="block text-xl font-semibold text-gray-700 mb-2">Data:</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="date" id="id_data" name="data" 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â class="w-full sm:w-1/2 p-3 border-2 border-green-200 rounded-lg focus:border-lyfesync-green focus:ring focus:ring-green-100 transition duration-150"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â value="{{ data_atual|date:'Y-m-d' }}" required>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <!-- SeleÃ§Ã£o de Humor por Emojis -->
Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-10">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block text-xl font-semibold text-gray-700 mb-4">Selecione seu Humor:</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-between items-center space-x-2 sm:space-x-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Os 5 emojis coloridos grandes -->
                        <div class="emoji-option" data-humor="Feliz">ðŸ˜€</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="emoji-option" data-humor="Calmo">ðŸ˜Œ</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="emoji-option" data-humor="Ansioso">ðŸ˜Ÿ</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="emoji-option" data-humor="Triste">ðŸ˜¥</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="emoji-option" data-humor="Irritado">ðŸ˜¡</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="hidden" name="estado" id="id_estado" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <!-- DescriÃ§Ã£o -->
Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="id_descricaohumor" class="block text-xl font-semibold text-gray-700 mb-2">DescriÃ§Ã£o:</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea id="id_descricaohumor" name="descricaohumor" rows="8"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="Descreva brevemente o que motivou seu humor hoje..."
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="w-full p-4 border-2 border-green-200 rounded-xl focus:border-lyfesync-green focus:ring focus:ring-green-100 transition duration-150 custom-textarea"></textarea>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <!-- BotÃ£o Salvar -->
Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-end">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="btn-salvar-humor py-3 px-8 text-white font-bold rounded-full shadow-lg transition duration-200">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  SALVAR
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <!-- COLUNA DIREITA: Tabela de ExplicaÃ§Ãµes (NÃƒO Ã© a dica da tela principal) -->
Â  Â  Â  Â  <div class="w-full lg:w-2/5 space-y-8">
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <!-- Tabela de Humor (ExplicaÃ§Ãµes) -->
Â  Â  Â  Â  Â  Â  <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-lyfesync-green">
Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-2xl font-bold text-lyfesync-green mb-4">Tabela de Humor</h2>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <!-- Tabela de emojis pequenos no topo -->
Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-start items-center space-x-4 mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-3xl text-green-500">ðŸ˜€</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-3xl text-lime-500">ðŸ˜Œ</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-3xl text-yellow-400">ðŸ˜Ÿ</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-3xl text-blue-500">ðŸ˜¥</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-3xl text-red-500">ðŸ˜¡</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <!-- DescriÃ§Ãµes -->
Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-gray-700 space-y-4 text-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-bold text-green-600">Feliz:</span> Representa momentos de alegria, contentamento ou satisfaÃ§Ã£o com a vida. Ã‰ um estado positivo de bem-estar emocional.
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-bold text-lime-600">Calmo:</span> Indica tranquilidade, serenidade e uma sensaÃ§Ã£o de paz interior, sem grandes agitaÃ§Ãµes emocionais.
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-bold text-yellow-600">Ansioso:</span> Expressa preocupaÃ§Ã£o, nervosismo ou estresse. Pode ser um estado de alerta em relaÃ§Ã£o a eventos futuros.
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-bold text-blue-600">Triste:</span> Reflete sentimentos de melancolia, tristeza ou desÃ¢nimo, geralmente associados a situaÃ§Ãµes de perda ou dificuldades.
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-bold text-red-600">Irritado:</span> Representa frustraÃ§Ã£o, raiva ou impaciÃªncia, geralmente como resposta a algo que incomoda ou causa desconforto.
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  </div>
Â  Â  </div>
</div>

<script>
Â  Â  document.addEventListener('DOMContentLoaded', function() {
Â  Â  Â  Â  const emojiOptions = document.querySelectorAll('.emoji-option');
Â  Â  Â  Â  const estadoInput = document.getElementById('id_estado');

Â  Â  Â  Â  // Define a data atual como padrÃ£o, se o campo estiver vazio
Â  Â  Â  Â  const dataInput = document.getElementById('id_data');
Â  Â  Â  Â  if (!dataInput.value) {
Â  Â  Â  Â  Â  Â  const today = new Date().toISOString().slice(0, 10);
Â  Â  Â  Â  Â  Â  dataInput.value = today;
Â  Â  Â  Â  }

Â  Â  Â  Â  emojiOptions.forEach(option => {
Â  Â  Â  Â  Â  Â  option.addEventListener('click', function() {
Â  Â  Â  Â  Â  Â  Â  Â  // 1. Remove a seleÃ§Ã£o de todos
Â  Â  Â  Â  Â  Â  Â  Â  emojiOptions.forEach(o => o.classList.remove('selected-emoji'));
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  // 2. Adiciona a seleÃ§Ã£o ao clicado
Â  Â  Â  Â  Â  Â  Â  Â  this.classList.add('selected-emoji');
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  // 3. Define o valor do input hidden
Â  Â  Â  Â  Â  Â  Â  Â  estadoInput.value = this.getAttribute('data-humor');
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  });
Â  Â  Â  Â  
Â  Â  Â  Â  // Adiciona validaÃ§Ã£o simples para o formulÃ¡rio
Â  Â  Â  Â  document.getElementById('form-registro-humor').addEventListener('submit', function(e) {
Â  Â  Â  Â  Â  Â  if (!estadoInput.value) {
Â  Â  Â  Â  Â  Â  Â  Â  // Usa um modal ou mensagem customizada em vez de alert()
                console.error('Por favor, selecione um estado de humor antes de salvar.');
Â  Â  Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  Â  Â  
Â  Â  Â  Â  // Seleciona o primeiro emoji por padrÃ£o (Melhora a UX)
Â  Â  Â  Â  if (!estadoInput.value && emojiOptions.length > 0) {
Â  Â  Â  Â  Â  Â  emojiOptions[0].click();
Â  Â  Â  Â  }
Â  Â  });
</script>

{% endblock %}