{% extends 'app_LyfeSync/layouts/masterpage_logado.html' %}
{% load static %}

{% block title %}
    Registrar Gratidão
{% endblock %}

{% block content_logado %}
    {# Prepara a variável de desativação para o textarea #}
    {% with is_disabled_content=form|yesno:'disabled,' %}
        <div class="container-fluid p-4 p-md-5 bg-white gratidao-page-container">
            <h1 class="h1 fw-semibold gratidao-title-color mb-4 gratidao-main-title">Gratidão</h1>

            <form method="POST">
                {% csrf_token %}

                <div class="row g-4 g-lg-5">
                    <div class="col-12 col-lg-7 d-grid gap-4">
                        <div class="text-center mb-4">
                            <h3 class="fw-bold gratidao-question-color">O QUE VOCÊ GOSTARIA DE AGRADECER HOJE?</h3>
                        </div>

                        <div class="d-grid gap-3">
                            {# Tag textarea em linha única com variável pré-calculada #}
                            <textarea name="{{ form.conteudo.name|default:'conteudo' }}" id="{{ form.conteudo.id_for_label|default:'id_conteudo' }}" rows="12" class="gratidao-field-bg form-control p-4 text-dark shadow-sm gratidao-textarea" placeholder="Escreva sua primeira gratidão..." {{ is_disabled_content }}>{{ form.conteudo.value|default:'' }}</textarea>

                            {% if form.conteudo.errors %}
                                <p class="text-danger small mt-2">{{ form.conteudo.errors.0 }}</p>
                            {% endif %}
                        </div>
                    </div>

                    <div class="col-12 col-lg-5 d-flex flex-column align-items-lg-end">
                        <div class="d-flex align-items-center gap-2 mb-4 mb-lg-5 gratidao-date-container">
                            <label class="text-secondary fw-medium gratidao-date-label">Data:</label>

                            {# Prepara a variável de desativação para o input de data #}
                            {% with is_disabled_data=form.data.value|yesno:'disabled,' %}
                                <input type="date" name="{{ form.data.name|default:'data' }}" value="{{ form.data.value|default:'' }}" class="date-input-placeholder form-control p-2 text-secondary text-center gratidao-date-input" {{ is_disabled_data }} />
                            {% endwith %}
                        </div>

                        <button type="submit" class="btn-salvar-gratidao btn btn-lg text-white fw-bold shadow-lg text-uppercase">Salvar</button>
                    </div>
                </div>
            </form>

            <div class="pt-5"></div>
        </div>
    {% endwith %}
{% endblock %}