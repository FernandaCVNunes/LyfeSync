{# alterarHabito.html #}
{% load static %}
{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/habito.css' %}">
{% endblock %}


<div class="modal fade" id="alterarHabitoModal" tabindex="-1" aria-labelledby="alterarHabitoLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content rs-modal-content shadow-lg rounded-3">
            <div class="modal-header border-0 pb-0">
                <h5 class="modal-title fw-bold fs-4" id="alterarHabitoLabel">Alterar Hábito</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
            </div>

            <div class="modal-body pt-3 px-4 pb-5">
                {# O atributo action será definido dinamicamente pelo JavaScript: form.setAttribute('action', `/habitos/alterar/${data.id}/`); #}
                <form id="formAlterarHabito" method="POST">
                    {% csrf_token %}

                    {# Removido o campo 'habito_id' pois a view espera o ID na URL, que é setada no atributo 'action' pelo JS. #}

                    <div class="row mb-3">
                        <div class="col-12">
                            <label for="nomeAlterar" class="form-label visually-hidden">Nome</label>
                            <input type="text" class="form-control rs-form-control" id="nomeAlterar" name="nome" placeholder="Nome do Hábito" required />
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="dataInicioAlterar" class="form-label visually-hidden">Data de Início</label>
                            <input type="date" class="form-control rs-form-control" id="dataInicioAlterar" name="data_inicio" required />
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="dataFimAlterar" class="form-label visually-hidden">Data de Fim</label>
                            <input type="date" class="form-control rs-form-control" id="dataFimAlterar" name="data_fim" />
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="quantidadeAlterar" class="form-label visually-hidden">Quantidade</label>
                            <input type="number" class="form-control rs-form-control" id="quantidadeAlterar" name="quantidade" placeholder="Quantidade" required />
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="frequenciaAlterar" class="form-label visually-hidden">Frequência</label>
                            <select class="form-select rs-form-control" id="frequenciaAlterar" name="frequencia" required>
                                <option value="DIARIO">Diário</option>
                                <option value="SEMANAL">Semanal</option>
                                <option value="MENSAL">Mensal</option>
                                <option value="PERSONALIZADO">Personalizado</option>
                            </select>
                        </div>
                    </div>

                    {# CAMPO UNIDADE (Mantido, coerente com forms.py e registrarHabito.html) #}
                    <div class="row mb-3">
                        <div class="col-12">
                            <label for="unidadeAlterar" class="form-label visually-hidden">Unidade</label>
                            <input type="text" class="form-control rs-form-control" id="unidadeAlterar" name="unidade" placeholder="Unidade (Ex: vezes, minutos, páginas)" />
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-12">
                            <label for="alvoAlterar" class="form-label visually-hidden">Alvo</label>
                            <input type="text" class="form-control rs-form-control" id="alvoAlterar" name="alvo" placeholder="Alvo (Opcional)" />
                        </div>
                    </div>

                    <div class="row mb-4">
                        <div class="col-12">
                            <label for="descricaoAlterar" class="form-label visually-hidden">Descrição</label>
                            <textarea class="form-control rs-form-control" id="descricaoAlterar" name="descricao" rows="3" placeholder="Descrição"></textarea>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-12 text-center">
                            <button type="submit" class="btn rs-btn-adicionar">Salvar Alterações</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
